import{d as a,r as n,b as t,e,f as o,j as d,F as c,g as i,t as s,_ as l}from"./index-C1Ndtg44.js";import"./phaser-BvzNzgtf.js";const r={class:"note-detail"},g={class:"note-header"},v={class:"note-tags"},m=l(a({__name:"DatabaseSetupView",setup(a){const l=n(["MongoDB","資料庫","後端","NoSQL"]);return(a,n)=>(e(),t("div",r,[o("div",g,[n[0]||(n[0]=o("h1",null,"資料庫設置指南",-1)),o("div",v,[(e(!0),t(c,null,i(l.value,(a=>(e(),t("span",{class:"tag",key:a},s(a),1)))),128))]),n[1]||(n[1]=o("div",{class:"note-meta"},[o("span",{class:"date"},"更新日期: 2025-11-24")],-1))]),n[2]||(n[2]=d('<div class="note-content" data-v-ca47e6a4><section data-v-ca47e6a4><h2 data-v-ca47e6a4>1. MongoDB 安裝步驟</h2><p data-v-ca47e6a4>MongoDB 是一個流行的 NoSQL 文檔型資料庫，適合處理大量非結構化數據：</p><h3 data-v-ca47e6a4>1.1 導入 MongoDB 公鑰</h3><pre data-v-ca47e6a4><code data-v-ca47e6a4>\n# 導入 MongoDB 公鑰\n$ wget -qO - https://www.mongodb.org/static/pgp/server-6.0.asc | sudo apt-key add -\n\n# 如果上面的命令顯示警告，可以使用下面的命令\n$ wget -qO - https://www.mongodb.org/static/pgp/server-6.0.asc | sudo gpg --dearmor -o /usr/share/keyrings/mongodb-archive-keyring.gpg\n        </code></pre><h3 data-v-ca47e6a4>1.2 創建 MongoDB 源列表文件</h3><pre data-v-ca47e6a4><code data-v-ca47e6a4>\n# 為 Ubuntu 20.04 (Focal)\n$ echo &quot;deb [ arch=amd64,arm64 signed-by=/usr/share/keyrings/mongodb-archive-keyring.gpg ] https://repo.mongodb.org/apt/ubuntu focal/mongodb-org/6.0 multiverse&quot; | sudo tee /etc/apt/sources.list.d/mongodb-org-6.0.list\n\n# 為 Ubuntu 22.04 (Jammy)\n$ echo &quot;deb [ arch=amd64,arm64 signed-by=/usr/share/keyrings/mongodb-archive-keyring.gpg ] https://repo.mongodb.org/apt/ubuntu jammy/mongodb-org/6.0 multiverse&quot; | sudo tee /etc/apt/sources.list.d/mongodb-org-6.0.list\n        </code></pre><h3 data-v-ca47e6a4>1.3 安裝 MongoDB</h3><pre data-v-ca47e6a4><code data-v-ca47e6a4>\n# 更新套件列表\n$ sudo apt update\n\n# 安裝 MongoDB\n$ sudo apt install -y mongodb-org\n\n# 檢查安裝的版本\n$ mongod --version\n        </code></pre><h3 data-v-ca47e6a4>1.4 啟動 MongoDB 服務</h3><pre data-v-ca47e6a4><code data-v-ca47e6a4>\n# 啟動 MongoDB 服務\n$ sudo systemctl start mongod\n\n# 檢查服務狀態\n$ sudo systemctl status mongod\n\n# 設置開機自啟\n$ sudo systemctl enable mongod\n        </code></pre></section><section data-v-ca47e6a4><h2 data-v-ca47e6a4>2. MongoDB 基本配置</h2><p data-v-ca47e6a4>配置 MongoDB 以優化性能和安全性：</p><h3 data-v-ca47e6a4>2.1 配置文件位置</h3><p data-v-ca47e6a4>MongoDB 的主要配置文件位於 <code data-v-ca47e6a4>/etc/mongod.conf</code>，使用 YAML 格式。</p><h3 data-v-ca47e6a4>2.2 基本配置選項</h3><pre data-v-ca47e6a4><code data-v-ca47e6a4>\n# 編輯配置文件\n$ sudo nano /etc/mongod.conf\n\n# 基本配置範例\nstorage:\n  dbPath: /var/lib/mongodb\n  journal:\n    enabled: true\n\nsystemLog:\n  destination: file\n  logAppend: true\n  path: /var/log/mongodb/mongod.log\n\nnet:\n  port: 27017\n  bindIp: 127.0.0.1\n\nprocessManagement:\n  timeZoneInfo: /usr/share/zoneinfo\n        </code></pre><h3 data-v-ca47e6a4>2.3 應用配置變更</h3><pre data-v-ca47e6a4><code data-v-ca47e6a4>\n# 重啟 MongoDB 服務以應用配置變更\n$ sudo systemctl restart mongod\n\n# 檢查服務狀態\n$ sudo systemctl status mongod\n        </code></pre><h3 data-v-ca47e6a4>2.4 配置文件參數說明</h3><ul data-v-ca47e6a4><li data-v-ca47e6a4><strong data-v-ca47e6a4>storage.dbPath</strong>：數據存儲路徑</li><li data-v-ca47e6a4><strong data-v-ca47e6a4>systemLog.path</strong>：日誌文件路徑</li><li data-v-ca47e6a4><strong data-v-ca47e6a4>net.port</strong>：MongoDB 監聽端口</li><li data-v-ca47e6a4><strong data-v-ca47e6a4>net.bindIp</strong>：MongoDB 綁定的 IP 地址（127.0.0.1 表示只允許本地連接）</li></ul></section><section data-v-ca47e6a4><h2 data-v-ca47e6a4>3. 用戶認證與權限</h2><p data-v-ca47e6a4>設置 MongoDB 的用戶認證和權限管理：</p><h3 data-v-ca47e6a4>3.1 啟用認證</h3><pre data-v-ca47e6a4><code data-v-ca47e6a4>\n# 編輯配置文件\n$ sudo nano /etc/mongod.conf\n\n# 添加安全配置\nsecurity:\n  authorization: enabled\n\n# 重啟 MongoDB 服務\n$ sudo systemctl restart mongod\n        </code></pre><h3 data-v-ca47e6a4>3.2 創建管理員用戶</h3><pre data-v-ca47e6a4><code data-v-ca47e6a4>\n# 連接到 MongoDB\n$ mongosh\n\n# 切換到 admin 數據庫\n&gt; use admin\n\n# 創建管理員用戶\n&gt; db.createUser({\n    user: &quot;adminUser&quot;,\n    pwd: &quot;securePassword&quot;,\n    roles: [ { role: &quot;userAdminAnyDatabase&quot;, db: &quot;admin&quot; }, &quot;readWriteAnyDatabase&quot; ]\n  })\n\n# 退出 MongoDB Shell\n&gt; exit\n        </code></pre><h3 data-v-ca47e6a4>3.3 使用認證連接</h3><pre data-v-ca47e6a4><code data-v-ca47e6a4>\n# 使用認證連接到 MongoDB\n$ mongosh --authenticationDatabase admin -u adminUser -p\n\n# 或在連接後認證\n$ mongosh\n&gt; use admin\n&gt; db.auth(&quot;adminUser&quot;, &quot;securePassword&quot;)\n        </code></pre><h3 data-v-ca47e6a4>3.4 創建應用程式專用用戶</h3><pre data-v-ca47e6a4><code data-v-ca47e6a4>\n# 連接到 MongoDB 並認證\n$ mongosh --authenticationDatabase admin -u adminUser -p\n\n# 創建新數據庫\n&gt; use myAppDatabase\n\n# 創建應用程式用戶\n&gt; db.createUser({\n    user: &quot;appUser&quot;,\n    pwd: &quot;appPassword&quot;,\n    roles: [\n      { role: &quot;readWrite&quot;, db: &quot;myAppDatabase&quot; },\n      { role: &quot;read&quot;, db: &quot;anotherDatabase&quot; }\n    ]\n  })\n        </code></pre><h3 data-v-ca47e6a4>3.5 MongoDB 角色說明</h3><ul data-v-ca47e6a4><li data-v-ca47e6a4><strong data-v-ca47e6a4>read</strong>：允許讀取指定數據庫中的數據</li><li data-v-ca47e6a4><strong data-v-ca47e6a4>readWrite</strong>：允許讀寫指定數據庫</li><li data-v-ca47e6a4><strong data-v-ca47e6a4>dbAdmin</strong>：允許執行管理任務</li><li data-v-ca47e6a4><strong data-v-ca47e6a4>userAdmin</strong>：允許創建和修改用戶</li><li data-v-ca47e6a4><strong data-v-ca47e6a4>clusterAdmin</strong>：允許執行集群管理操作</li><li data-v-ca47e6a4><strong data-v-ca47e6a4>readAnyDatabase</strong>：允許讀取所有數據庫</li><li data-v-ca47e6a4><strong data-v-ca47e6a4>readWriteAnyDatabase</strong>：允許讀寫所有數據庫</li><li data-v-ca47e6a4><strong data-v-ca47e6a4>userAdminAnyDatabase</strong>：允許在所有數據庫上管理用戶</li><li data-v-ca47e6a4><strong data-v-ca47e6a4>dbAdminAnyDatabase</strong>：允許在所有數據庫上執行管理任務</li><li data-v-ca47e6a4><strong data-v-ca47e6a4>root</strong>：超級用戶，擁有所有權限</li></ul></section><section data-v-ca47e6a4><h2 data-v-ca47e6a4>4. 資料備份與恢復</h2><p data-v-ca47e6a4>定期備份 MongoDB 數據是防止數據丟失的關鍵：</p><h3 data-v-ca47e6a4>4.1 使用 mongodump 備份</h3><pre data-v-ca47e6a4><code data-v-ca47e6a4>\n# 備份所有數據庫\n$ mongodump --authenticationDatabase admin -u adminUser -p --out /backup/mongodb/$(date +%Y%m%d)\n\n# 備份特定數據庫\n$ mongodump --authenticationDatabase admin -u adminUser -p --db myAppDatabase --out /backup/mongodb/$(date +%Y%m%d)\n\n# 備份特定集合\n$ mongodump --authenticationDatabase admin -u adminUser -p --db myAppDatabase --collection myCollection --out /backup/mongodb/$(date +%Y%m%d)\n        </code></pre><h3 data-v-ca47e6a4>4.2 使用 mongorestore 恢復</h3><pre data-v-ca47e6a4><code data-v-ca47e6a4>\n# 恢復所有數據庫\n$ mongorestore --authenticationDatabase admin -u adminUser -p /backup/mongodb/20251124/\n\n# 恢復特定數據庫\n$ mongorestore --authenticationDatabase admin -u adminUser -p --db myAppDatabase /backup/mongodb/20251124/myAppDatabase/\n\n# 恢復特定集合\n$ mongorestore --authenticationDatabase admin -u adminUser -p --db myAppDatabase --collection myCollection /backup/mongodb/20251124/myAppDatabase/myCollection.bson\n        </code></pre><h3 data-v-ca47e6a4>4.3 使用 mongoexport 導出 JSON</h3><pre data-v-ca47e6a4><code data-v-ca47e6a4>\n# 導出集合為 JSON 格式\n$ mongoexport --authenticationDatabase admin -u adminUser -p --db myAppDatabase --collection myCollection --out /backup/mongodb/myCollection.json\n\n# 導出為格式化 JSON\n$ mongoexport --authenticationDatabase admin -u adminUser -p --db myAppDatabase --collection myCollection --out /backup/mongodb/myCollection.json --pretty\n        </code></pre><h3 data-v-ca47e6a4>4.4 使用 mongoimport 導入 JSON</h3><pre data-v-ca47e6a4><code data-v-ca47e6a4>\n# 導入 JSON 到集合\n$ mongoimport --authenticationDatabase admin -u adminUser -p --db myAppDatabase --collection myCollection --file /backup/mongodb/myCollection.json\n\n# 導入時覆蓋現有數據\n$ mongoimport --authenticationDatabase admin -u adminUser -p --db myAppDatabase --collection myCollection --file /backup/mongodb/myCollection.json --drop\n        </code></pre><h3 data-v-ca47e6a4>4.5 設置自動備份</h3><pre data-v-ca47e6a4><code data-v-ca47e6a4>\n# 創建備份腳本\n$ sudo nano /usr/local/bin/mongodb-backup.sh\n\n#!/bin/bash\nBACKUP_DIR=&quot;/backup/mongodb/$(date +%Y%m%d)&quot;\nmkdir -p $BACKUP_DIR\nmongodump --authenticationDatabase admin -u adminUser -p &quot;securePassword&quot; --out $BACKUP_DIR\nfind /backup/mongodb -type d -mtime +7 -exec rm -rf {} \\;\n\n# 設置執行權限\n$ sudo chmod +x /usr/local/bin/mongodb-backup.sh\n\n# 添加到 crontab\n$ sudo crontab -e\n# 添加以下行以每天凌晨 2 點執行備份\n# 0 2 * * * /usr/local/bin/mongodb-backup.sh\n        </code></pre></section><section data-v-ca47e6a4><h2 data-v-ca47e6a4>5. 性能優化</h2><p data-v-ca47e6a4>優化 MongoDB 以提高性能和效率：</p><h3 data-v-ca47e6a4>5.1 創建索引</h3><pre data-v-ca47e6a4><code data-v-ca47e6a4>\n# 連接到 MongoDB\n$ mongosh --authenticationDatabase admin -u adminUser -p\n\n# 切換到目標數據庫\n&gt; use myAppDatabase\n\n# 創建單字段索引\n&gt; db.myCollection.createIndex({ fieldName: 1 })  // 1 表示升序索引\n\n# 創建複合索引\n&gt; db.myCollection.createIndex({ field1: 1, field2: -1 })  // -1 表示降序索引\n\n# 創建唯一索引\n&gt; db.myCollection.createIndex({ email: 1 }, { unique: true })\n\n# 創建文本索引\n&gt; db.myCollection.createIndex({ description: &quot;text&quot; })\n\n# 查看集合的索引\n&gt; db.myCollection.getIndexes()\n        </code></pre><h3 data-v-ca47e6a4>5.2 查詢優化</h3><pre data-v-ca47e6a4><code data-v-ca47e6a4>\n# 使用 explain() 分析查詢性能\n&gt; db.myCollection.find({ field: &quot;value&quot; }).explain(&quot;executionStats&quot;)\n\n# 使用投影僅返回需要的字段\n&gt; db.myCollection.find({ field: &quot;value&quot; }, { neededField: 1, _id: 0 })\n\n# 使用 limit() 限制結果數量\n&gt; db.myCollection.find().limit(100)\n\n# 使用 sort() 排序結果\n&gt; db.myCollection.find().sort({ field: 1 })\n        </code></pre><h3 data-v-ca47e6a4>5.3 配置優化</h3><pre data-v-ca47e6a4><code data-v-ca47e6a4>\n# 編輯配置文件\n$ sudo nano /etc/mongod.conf\n\n# 優化內存使用\nstorage:\n  wiredTiger:\n    engineConfig:\n      cacheSizeGB: 1  # 根據可用內存調整\n\n# 優化連接池\nnet:\n  maxIncomingConnections: 1000\n\n# 優化日誌\nsystemLog:\n  verbosity: 0  # 0-5，數字越大日誌越詳細\n  quiet: false\n  traceAllExceptions: false\n        </code></pre><h3 data-v-ca47e6a4>5.4 監控性能</h3><pre data-v-ca47e6a4><code data-v-ca47e6a4>\n# 連接到 MongoDB\n$ mongosh --authenticationDatabase admin -u adminUser -p\n\n# 查看數據庫狀態\n&gt; db.serverStatus()\n\n# 查看當前操作\n&gt; db.currentOp()\n\n# 查看集合統計信息\n&gt; db.myCollection.stats()\n\n# 查看數據庫統計信息\n&gt; db.stats()\n        </code></pre></section><section data-v-ca47e6a4><h2 data-v-ca47e6a4>6. MongoDB Compass 安裝與使用</h2><p data-v-ca47e6a4>MongoDB Compass 是一個圖形化界面工具，用於可視化和操作 MongoDB 數據：</p><h3 data-v-ca47e6a4>6.1 下載與安裝</h3><ol data-v-ca47e6a4><li data-v-ca47e6a4>訪問 <a href="https://www.mongodb.com/try/download/compass" target="_blank" data-v-ca47e6a4>MongoDB Compass 下載頁面</a></li><li data-v-ca47e6a4>選擇適合您操作系統的版本下載</li><li data-v-ca47e6a4>安裝下載的文件</li></ol><p data-v-ca47e6a4>在 Ubuntu 上使用 .deb 包安裝：</p><pre data-v-ca47e6a4><code data-v-ca47e6a4>\n# 安裝 .deb 包\n$ sudo dpkg -i mongodb-compass_*.deb\n\n# 如果有依賴問題，運行\n$ sudo apt --fix-broken install\n        </code></pre><h3 data-v-ca47e6a4>6.2 連接到 MongoDB 服務器</h3><ol data-v-ca47e6a4><li data-v-ca47e6a4>啟動 MongoDB Compass</li><li data-v-ca47e6a4>在連接字符串中輸入：<code data-v-ca47e6a4>mongodb://username:password@hostname:27017/admin</code></li><li data-v-ca47e6a4>或使用表單填寫連接信息： <ul data-v-ca47e6a4><li data-v-ca47e6a4>Hostname: localhost 或伺服器 IP</li><li data-v-ca47e6a4>Port: 27017</li><li data-v-ca47e6a4>Authentication: Username/Password</li><li data-v-ca47e6a4>Username: adminUser</li><li data-v-ca47e6a4>Password: securePassword</li><li data-v-ca47e6a4>Authentication Database: admin</li></ul></li><li data-v-ca47e6a4>點擊「Connect」按鈕</li></ol><h3 data-v-ca47e6a4>6.3 使用 Compass 管理數據</h3><p data-v-ca47e6a4>MongoDB Compass 提供以下功能：</p><ul data-v-ca47e6a4><li data-v-ca47e6a4>瀏覽和查詢數據庫與集合</li><li data-v-ca47e6a4>創建、編輯和刪除文檔</li><li data-v-ca47e6a4>創建和管理索引</li><li data-v-ca47e6a4>分析查詢性能</li><li data-v-ca47e6a4>可視化數據分布</li><li data-v-ca47e6a4>導入和導出數據</li><li data-v-ca47e6a4>監控數據庫性能</li></ul></section><section data-v-ca47e6a4><h2 data-v-ca47e6a4>7. MongoDB Shell 操作指南</h2><p data-v-ca47e6a4>MongoDB Shell (mongosh) 是一個功能強大的命令行工具，用於與 MongoDB 交互：</p><h3 data-v-ca47e6a4>7.1 安裝 MongoDB Shell</h3><pre data-v-ca47e6a4><code data-v-ca47e6a4>\n# 下載 MongoDB Shell\n$ wget https://downloads.mongodb.com/compass/mongodb-mongosh_1.8.0_amd64.deb\n\n# 安裝\n$ sudo dpkg -i mongodb-mongosh_1.8.0_amd64.deb\n\n# 檢查版本\n$ mongosh --version\n        </code></pre><h3 data-v-ca47e6a4>7.2 基本操作</h3><pre data-v-ca47e6a4><code data-v-ca47e6a4>\n# 連接到 MongoDB\n$ mongosh\n\n# 顯示所有數據庫\n&gt; show dbs\n\n# 切換/創建數據庫\n&gt; use myDatabase\n\n# 顯示當前數據庫中的集合\n&gt; show collections\n\n# 創建集合\n&gt; db.createCollection(&quot;myCollection&quot;)\n\n# 插入文檔\n&gt; db.myCollection.insertOne({ name: &quot;John&quot;, age: 30, city: &quot;New York&quot; })\n\n# 插入多個文檔\n&gt; db.myCollection.insertMany([\n  { name: &quot;Jane&quot;, age: 25, city: &quot;Los Angeles&quot; },\n  { name: &quot;Bob&quot;, age: 35, city: &quot;Chicago&quot; }\n])\n\n# 查詢所有文檔\n&gt; db.myCollection.find()\n\n# 格式化輸出\n&gt; db.myCollection.find().pretty()\n        </code></pre><h3 data-v-ca47e6a4>7.3 查詢操作</h3><pre data-v-ca47e6a4><code data-v-ca47e6a4>\n# 條件查詢\n&gt; db.myCollection.find({ age: { $gt: 25 } })  // 年齡大於 25\n\n# AND 條件\n&gt; db.myCollection.find({ age: { $gt: 25 }, city: &quot;Chicago&quot; })\n\n# OR 條件\n&gt; db.myCollection.find({ $or: [{ age: { $gt: 30 } }, { city: &quot;Los Angeles&quot; }] })\n\n# 排序\n&gt; db.myCollection.find().sort({ age: 1 })  // 1 升序，-1 降序\n\n# 限制結果數量\n&gt; db.myCollection.find().limit(2)\n\n# 跳過結果\n&gt; db.myCollection.find().skip(1).limit(2)\n\n# 計數\n&gt; db.myCollection.countDocuments({ age: { $gt: 25 } })\n        </code></pre><h3 data-v-ca47e6a4>7.4 更新操作</h3><pre data-v-ca47e6a4><code data-v-ca47e6a4>\n# 更新單個文檔\n&gt; db.myCollection.updateOne(\n  { name: &quot;John&quot; },\n  { $set: { age: 31, city: &quot;Boston&quot; } }\n)\n\n# 更新多個文檔\n&gt; db.myCollection.updateMany(\n  { age: { $gt: 30 } },\n  { $set: { status: &quot;senior&quot; } }\n)\n\n# 替換整個文檔\n&gt; db.myCollection.replaceOne(\n  { name: &quot;John&quot; },\n  { name: &quot;John Smith&quot;, age: 31, city: &quot;Boston&quot;, status: &quot;active&quot; }\n)\n        </code></pre><h3 data-v-ca47e6a4>7.5 刪除操作</h3><pre data-v-ca47e6a4><code data-v-ca47e6a4>\n# 刪除單個文檔\n&gt; db.myCollection.deleteOne({ name: &quot;John&quot; })\n\n# 刪除多個文檔\n&gt; db.myCollection.deleteMany({ age: { $lt: 30 } })\n\n# 刪除集合\n&gt; db.myCollection.drop()\n\n# 刪除數據庫\n&gt; db.dropDatabase()\n        </code></pre></section><section data-v-ca47e6a4><h2 data-v-ca47e6a4>8. 常見問題排解</h2><p data-v-ca47e6a4>MongoDB 使用過程中可能遇到的常見問題及解決方法：</p><h3 data-v-ca47e6a4>8.1 連接問題</h3><pre data-v-ca47e6a4><code data-v-ca47e6a4>\n# 檢查 MongoDB 服務狀態\n$ sudo systemctl status mongod\n\n# 檢查 MongoDB 日誌\n$ sudo tail -f /var/log/mongodb/mongod.log\n\n# 檢查 MongoDB 是否監聽正確的端口和 IP\n$ sudo netstat -plntu | grep mongod\n\n# 檢查防火牆設置\n$ sudo ufw status\n        </code></pre><p data-v-ca47e6a4>常見連接問題解決方法：</p><ul data-v-ca47e6a4><li data-v-ca47e6a4>確保 MongoDB 服務正在運行</li><li data-v-ca47e6a4>檢查 bindIp 設置是否正確（如果需要遠程訪問，應設置為 0.0.0.0 或特定 IP）</li><li data-v-ca47e6a4>確保防火牆允許 MongoDB 端口（默認 27017）</li><li data-v-ca47e6a4>檢查認證設置和用戶憑證是否正確</li></ul><h3 data-v-ca47e6a4>8.2 性能問題</h3><p data-v-ca47e6a4>MongoDB 性能下降的常見原因和解決方法：</p><ul data-v-ca47e6a4><li data-v-ca47e6a4><strong data-v-ca47e6a4>缺少索引</strong>：為常用查詢字段創建適當的索引</li><li data-v-ca47e6a4><strong data-v-ca47e6a4>內存不足</strong>：增加服務器內存或調整 cacheSizeGB 設置</li><li data-v-ca47e6a4><strong data-v-ca47e6a4>查詢效率低</strong>：使用 explain() 分析查詢，優化查詢模式</li><li data-v-ca47e6a4><strong data-v-ca47e6a4>磁盤 I/O 瓶頸</strong>：使用 SSD 存儲或優化存儲配置</li><li data-v-ca47e6a4><strong data-v-ca47e6a4>連接數過多</strong>：檢查應用程序是否正確關閉連接，調整 maxIncomingConnections</li></ul><h3 data-v-ca47e6a4>8.3 數據恢復</h3><p data-v-ca47e6a4>在數據損壞或意外刪除的情況下：</p><ul data-v-ca47e6a4><li data-v-ca47e6a4>使用最近的備份恢復數據</li><li data-v-ca47e6a4>如果使用了 WiredTiger 存儲引擎（默認），可以嘗試從日誌恢復</li><li data-v-ca47e6a4>對於重要數據，考慮使用專業數據恢復服務</li></ul><pre data-v-ca47e6a4><code data-v-ca47e6a4>\n# 從備份恢復\n$ mongorestore --authenticationDatabase admin -u adminUser -p /path/to/backup\n        </code></pre><h3 data-v-ca47e6a4>8.4 常見錯誤代碼</h3><ul data-v-ca47e6a4><li data-v-ca47e6a4><strong data-v-ca47e6a4>Error 13</strong>：權限錯誤，檢查用戶權限和文件系統權限</li><li data-v-ca47e6a4><strong data-v-ca47e6a4>Error 48</strong>：端口已被占用，檢查是否有其他 MongoDB 實例或程序使用相同端口</li><li data-v-ca47e6a4><strong data-v-ca47e6a4>Error 100</strong>：認證失敗，檢查用戶名和密碼</li><li data-v-ca47e6a4><strong data-v-ca47e6a4>Error 14</strong>：未授權操作，檢查用戶角色和權限</li></ul></section><section data-v-ca47e6a4><h2 data-v-ca47e6a4>9. 安全最佳實踐</h2><p data-v-ca47e6a4>保護 MongoDB 數據庫的安全最佳實踐：</p><ul data-v-ca47e6a4><li data-v-ca47e6a4><strong data-v-ca47e6a4>啟用認證</strong>：始終啟用認證機制</li><li data-v-ca47e6a4><strong data-v-ca47e6a4>使用強密碼</strong>：為所有用戶設置強密碼</li><li data-v-ca47e6a4><strong data-v-ca47e6a4>最小權限原則</strong>：為用戶分配最小必要權限</li><li data-v-ca47e6a4><strong data-v-ca47e6a4>限制網絡訪問</strong>：使用防火牆限制對 MongoDB 端口的訪問</li><li data-v-ca47e6a4><strong data-v-ca47e6a4>加密通信</strong>：配置 TLS/SSL 加密</li><li data-v-ca47e6a4><strong data-v-ca47e6a4>加密存儲數據</strong>：使用存儲加密（企業版功能）</li><li data-v-ca47e6a4><strong data-v-ca47e6a4>定期備份</strong>：實施定期備份策略</li><li data-v-ca47e6a4><strong data-v-ca47e6a4>更新至最新版本</strong>：保持 MongoDB 版本更新以獲取安全補丁</li><li data-v-ca47e6a4><strong data-v-ca47e6a4>審計日誌</strong>：啟用審計功能（企業版功能）</li><li data-v-ca47e6a4><strong data-v-ca47e6a4>定期安全審查</strong>：定期檢查安全配置和訪問日誌</li></ul></section><section data-v-ca47e6a4><h2 data-v-ca47e6a4>10. 進階主題</h2><h3 data-v-ca47e6a4>10.1 複製集</h3><p data-v-ca47e6a4>MongoDB 複製集提供高可用性和數據冗餘：</p><pre data-v-ca47e6a4><code data-v-ca47e6a4>\n# 配置複製集\nreplication:\n  replSetName: &quot;rs0&quot;\n        </code></pre><p data-v-ca47e6a4>初始化複製集：</p><pre data-v-ca47e6a4><code data-v-ca47e6a4>\n# 連接到主節點\n$ mongosh\n\n# 初始化複製集\n&gt; rs.initiate({\n    _id: &quot;rs0&quot;,\n    members: [\n      { _id: 0, host: &quot;mongodb0.example.com:27017&quot; },\n      { _id: 1, host: &quot;mongodb1.example.com:27017&quot; },\n      { _id: 2, host: &quot;mongodb2.example.com:27017&quot; }\n    ]\n  })\n\n# 檢查複製集狀態\n&gt; rs.status()\n        </code></pre><h3 data-v-ca47e6a4>10.2 分片</h3><p data-v-ca47e6a4>MongoDB 分片用於水平擴展，處理大數據集和高吞吐量：</p><ul data-v-ca47e6a4><li data-v-ca47e6a4>設置配置服務器</li><li data-v-ca47e6a4>設置分片服務器</li><li data-v-ca47e6a4>設置 mongos 路由服務</li><li data-v-ca47e6a4>配置數據庫和集合分片</li></ul><h3 data-v-ca47e6a4>10.3 監控與分析</h3><p data-v-ca47e6a4>使用 MongoDB 內置工具和第三方工具監控數據庫：</p><ul data-v-ca47e6a4><li data-v-ca47e6a4>MongoDB Atlas 監控（雲服務）</li><li data-v-ca47e6a4>MongoDB Cloud Manager</li><li data-v-ca47e6a4>Prometheus + Grafana</li><li data-v-ca47e6a4>MongoDB Compass</li></ul></section></div>',1))]))}}),[["__scopeId","data-v-ca47e6a4"]]);export{m as default};
